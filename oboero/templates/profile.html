{% extends "_layout/_base.html" %}
{% block head %}
<script>
    (function() {
        var po = document.createElement('script');
        po.type = 'text/javascript'; po.async = true;
        po.src = 'https://plus.google.com/js/client:plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();

    var request = gapi.client.plus.people.get( {'userId' : '{{session["gplus_id"]}}' } );
    request.execute( function(profile) {
                      $('#profile').empty();
                      if (profile.error) {
                        $('#profile').append(profile.error);
                        return;
                      }
                      $('#profile').append(
                          $('<p><img src=\"' + profile.image.url + '\"></p>'));
                      $('#profile').append(
                          $('<p>Hello ' + profile.displayName + '!<br />Tagline: ' +
                          profile.tagline + '<br />About: ' + profile.aboutMe + '</p>'));
                      if (profile.cover && profile.coverPhoto) {
                        $('#profile').append(
                            $('<p><img src=\"' + profile.cover.coverPhoto.url + '\"></p>'));
                      }
                    });
</script>
{% endblock %}
{% block content %}
<section id="profile-page">
        <nav class="pure-menu pure-menu-open pure-menu-horizontal">
            <a href="#" class="pure-menu-heading">「覚えろ」</a>

            <ul>
                <li><a href="{{ url_for('index.about') }}"><i class="fa fa-cube"></i>&nbsp;About</a></li>
                <li><a href="http://github.com/kelvintaywl/oboero"><i class="fa fa-github"></i>&nbsp;Github</a></li>
                <li><a onclick="logout()"><i class="fa fa-sign-out"></i>&nbsp;logout</a></li>
                <li> Welcome {{ current_user.username }}</li>
            </ul>
        </nav>
        <div class="pure-g" style="margin-top: 50px;">
            <div class="pure-u-md-1-3">
                <div class="placard">
                    <img src="static/img/kanji.png">
                    <div class="pure-menu pure-menu-open">
                        <a class="pure-menu-heading"><h4>Kanji Crush Saga</h4></a>

                        <ul>
                            <li><a><progress max="100" value="50"></progress></a></li>
                            <li><a href="#">CONTINUE</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="pure-u-md-1-3">
                <div class="placard">
                    <img src="static/img/wordcount_min.png">
                    <div class="pure-menu pure-menu-open">
                        <a class="pure-menu-heading"><h4>Dictionary Master</h4></a>

                        <ul>
                            <li><a><progress max="100" value="75"></progress></a></li>
                            <li><a href="#">CONTINUE</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="pure-u-md-1-3">
                <div class="placard">
                    <img src="static/img/verbconju.png">
                    <div class="pure-menu pure-menu-open">
                        <a class="pure-menu-heading"><h4>Verb Conjugator</h4></a>

                        <ul>
                            <li><a><progress max="100" value="50"></progress></a></li>
                            <li><a href="#">CONTINUE</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- NOTE: this is for testing of Google's API client. Re-prettify it soon!
        ''' -->
        <div id="profile"></div>
    </section>
{% endblock %}
{% block js %}
    var signOut = function(){
        gapi.auth.signOut();
        $.ajax({
            type: 'POST',
            url: '{{url_for('index.logout')}}',
            success: function(data){
                alert(data);
                window.location.href = "{{url_for('index.game')}}";
            }
        });
    };
{% endblock %}
